
<h2>Cadastrar Fornecedor</h2>

<form  #form="ngForm" (ngSubmit)="cadastrar()">
  <label>CPF/CNPJ:</label>
  <input [(ngModel)]="fornecedor.cpfCnpj" name="cpfCnpj"
         required
         (blur)="onCpfCnpjChange()"
         [mask]="isPessoaFisica() ? '000.000.000-00' : '00.000.000/0000-00'"
         [attr.placeholder]="isPessoaFisica() ? '000.000.000-00' : '00.000.000/0000-00'" />






  <label>Nome:</label>

  <input type="text" name="nome" [(ngModel)]="fornecedor.nome" 
  placeholder="Digite o nome da empresa"
  required />
  <div *ngIf="form.submitted && !fornecedor.nome" class="erro">
    Nome Ã© obrigatÃ³rio.
  </div>


  <label>E-mail:</label>
  <input [(ngModel)]="fornecedor.email" name="email" 
  placeholder="tests@test.com"
  required type="email" />

  <label>CEP:</label>
  <input [(ngModel)]="fornecedor.cep" 
  mask="00000-000"
  name="cep" (blur)="buscarEnderecoPorCep(fornecedor.cep)"
  placeholder="00000-000" />
  
  <div *ngIf="cidadeUfVisivel" class="cidade-uf-container">
    <div class="input-group">
      <label>Cidade:</label>
      <input [(ngModel)]="fornecedor.cidade" name="cidade" placeholder="Cidade" readonly />
    </div>
  
    <div class="input-group">
      <label>Estado:</label>
      <input [(ngModel)]="fornecedor.uf" name="uf" placeholder="UF" readonly />
    </div>
  </div>


  

  <div *ngIf="isPessoaFisica()">
    <label>RG:</label>
    <input [(ngModel)]="fornecedor.rg" name="rg" required mask="00.000.000-0" />

    <label>Data de Nascimento:</label>
    <input [(ngModel)]="fornecedor.dataNascimento" name="dataNascimento" required type="date" />
  </div>


  <label>Associe uma Empresa:</label>
<div class="link">


  <div *ngFor="let emp of empresas" class="empresa-checkbox">
     <label >
    <input type="checkbox"
           [value]="emp.id"
           (change)="toggleEmpresa(emp.id, $event)" />
    {{ emp.cnpj }} ({{ emp.estado }})
  </label>

</div>
 
   
      
      </div>
      <a [routerLink]="['/empresas/cadastrar']" >Cadastrar Nova Empresa</a>  
    

  <button type="submit">ðŸ’¾ Salvar</button>
 
  <div *ngIf="mensagensErro.length" class="erro">
    <ul>
      <li *ngFor="let msg of mensagensErro">{{ msg }}</li>
    </ul>
  </div>
</form>